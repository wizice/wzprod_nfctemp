<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SC Point - Ïò®ÎèÑ Îç∞Ïù¥ÌÑ∞</title>

    <!-- External CSS -->
    <link rel="stylesheet" href="css/nfc_top.css?ts=202509211400">
    <link rel="stylesheet" href="css/nfc_temperature.css?ts=202509211400">
    <link rel="stylesheet" href="css/nfc_main.css?ts=202509211400">

    <!-- Chart.js - Local file -->
    <script src="js/chart.min.js"></script>
    <script src="js/jspdf.umd.min.js"></script>
    <script src="js/html2canvas.min.js"></script>


</head>
<body>
<!-- Ï†ïÌíà ÎßàÌÅ¨ -->
<div class="certification-mark" id="certificationMark">
    <img src="img/certification_mark.png">
</div>

<div class="container">
    <!-- Header -->
    <div class="header">
        <img  id="logo_img"  class="no-select-img" src="img/company_logo.png">
        <div class="subtitle">NFC Ïò®ÎèÑÍ∏∞Î°ùÎùºÎ≤®</div>
        <!-- Admin Menu Button -->
        <button class="top-icon-btn home-btn" id="homeBtn" aria-label="Ìôà">
            <img src="img/home.svg">
        </button>
        <!-- Admin Menu Button -->
        <button class="top-icon-btn admin-menu-btn" id="adminMenuBtn" aria-label="Í¥ÄÎ¶¨Ïûê Î©îÎâ¥">
            <img src="img/manager_login.svg" >
        </button>
    </div>

    <!-- NFC Status Card (ÏßÑÌñâÎ∞î ÌëúÏãúÏö©) -->
    <div class="nfc-card" id="nfcProgressCard" style="display: none;">
        <div class="nfc-visual">
            <!-- Pulse Rings -->
            <div class="pulse-ring"></div>
            <div class="pulse-ring"></div>
            <div class="pulse-ring"></div>

            <!-- NFC Icon -->
            <div class="nfc-icon" id="nfcProgressIcon">
                <img src="img/reading_tag.svg">
            </div>
        </div>

        <!-- Status Info -->
        <div class="status-info">
            <h2 class="status-title" id="progressStatusTitle">ÏÑ§Ï†ï ÌôïÏù∏Ï§ë</h2>
            <p class="status-subtitle" id="progressStatusSubtitle">Ïû†ÏãúÎßå Í∏∞Îã§Î†§Ï£ºÏÑ∏Ïöî</p>
        </div>
        
        <!-- Progress Bar -->
        <div id="progress-container" class="hide">
            <div id="progress-bar">0%</div>
        </div>
    </div>

    <!-- 1. Chart ContainerÏóê Î™®Îìú ÏÑ†ÌÉù Î≤ÑÌäº Ï∂îÍ∞Ä -->
    <!-- 1. HTML - ÌÉ≠ ÌòïÌÉúÎ°ú Î≥ÄÍ≤Ω -->
    <div class="chart-container">

        <!-- Ï∞®Ìä∏ Î™®Îìú ÌÉ≠ -->
        <div class="chart-mode-tabs">
            <button id="autoModeBtn" class="tab-btn" onclick="changeChartMode('auto')">
                <span class="tab-icon">üìä</span>
                <span class="tab-text">ÏûêÎèô Î≤îÏúÑ</span>
            </button>
            <button id="rangeModeBtn" class="tab-btn active" onclick="changeChartMode('range')">
                <span class="tab-icon">üìè</span>
                <span class="tab-text">ÏÑ§Ï†ï Î≤îÏúÑ</span>
            </button>
            <div class="tab-indicator"></div>
        </div>

        <div class="chart-wrapper">
            <canvas id="temperatureChart"></canvas>
        </div>
    </div>

    <!-- Ï∏°Ï†ï Ï†ïÎ≥¥ ÏÑπÏÖò Ï∂îÍ∞Ä (Data Table ÏïûÏóê ÏÇΩÏûÖ) -->
    <div class="measurement-info">
        <div class="info-row">
            <span class="info-label">Ï∏°Ï†ï ÏÉÅÌÉú:</span>
            <span class="info-value" id="measurementStatus">-</span>
        </div>
        <div class="info-row">
            <span class="info-label">ÏµúÍ≥† Ï∏°Ï†ïÍ∞í:</span>
            <span class="info-value" id="maxTempValue">-</span>
        </div>
        <div class="info-row">
            <span class="info-label">ÏµúÏ†Ä Ï∏°Ï†ïÍ∞í:</span>
            <span class="info-value" id="minTempValue">-</span>
        </div>
        <div class="info-row">
            <span class="info-label">Ï∏°Ï†ï Î≤îÏúÑ:</span>
            <span class="info-value" id="temperatureRange">-</span>
        </div>
        <div class="info-row">
            <span class="info-label">Ï∏°Ï†ï Í∞ÑÍ≤©:</span>
            <span class="info-value" id="intervalTime">-</span>
        </div>
        <div class="info-row">
            <span class="info-label">Ï∏°Ï†ï ÏãúÏûëÏùºÏãú:</span>
            <span class="info-value" id="measurementStartTime">-</span>
        </div>
    </div>


    <!-- 3. Îç∞Ïù¥ÌÑ∞ Ï°∞Ìöå Î∞è ÎÇ¥Î≥¥ÎÇ¥Í∏∞ ÏÑπÏÖò Ï∂îÍ∞Ä -->
    <div class="data-export-section">
        <!-- Îç∞Ïù¥ÌÑ∞ ÌÉ≠ -->
        <div class="data-tabs">
            <button id="allDataTab" class="data-tab-btn active" onclick="switchDataTab('all')">
                <span class="tab-icon">üìä</span>
                <span class="tab-text">Ï†ÑÏ≤¥ Îç∞Ïù¥ÌÑ∞</span>
            </button>
            <button id="analysisTab" class="data-tab-btn" onclick="switchDataTab('analysis')">
                <span class="tab-icon">üîç</span>
                <span class="tab-text">Î∂ÑÏÑù Îç∞Ïù¥ÌÑ∞</span>
            </button>
            <div class="data-tab-indicator"></div>
        </div>

        <!-- Ï†ÑÏ≤¥ Îç∞Ïù¥ÌÑ∞ ÌÉ≠ ÎÇ¥Ïö© -->
        <div id="allDataContent" class="tab-content active">
            <div class="section-header">
                <h3>Îç∞Ïù¥ÌÑ∞ Ï°∞Ìöå Î∞è ÎÇ¥Î≥¥ÎÇ¥Í∏∞</h3>
                <!-- 2. PDF Ï†ÄÏû• Î≤ÑÌäº ÏàòÏ†ï -->
                <div class="export-buttons">
                    <button class="export-btn pdf-btn" onclick="exportToPDFWithChart()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <polyline points="14,2 14,8 20,8"/>
                            <line x1="16" y1="13" x2="8" y2="13"/>
                            <line x1="16" y1="17" x2="8" y2="17"/>
                            <polyline points="10,9 9,9 8,9"/>
                        </svg>
                        PDF Ï†ÄÏû•
                    </button>
                    <button class="export-btn excel-btn" onclick="exportToExcel()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <polyline points="14,2 14,8 20,8"/>
                            <rect x="8" y="13" width="2" height="3"/>
                            <rect x="10" y="13" width="2" height="3"/>
                            <rect x="12" y="13" width="2" height="3"/>
                            <rect x="14" y="13" width="2" height="3"/>
                        </svg>
                        Excel
                    </button>
                </div>
            </div>

            <!-- 3. PDF ÎØ∏Î¶¨Î≥¥Í∏∞ Î™®Îã¨ (ÏÑ†ÌÉùÏ†Å) -->
            <div class="pdf-preview-modal" id="pdfPreviewModal" style="display: none;">
                <div class="modal-backdrop" onclick="closePdfPreview()"></div>
                <div class="modal-content-large">
                    <div class="modal-header">
                        <h3>PDF ÎØ∏Î¶¨Î≥¥Í∏∞</h3>
                        <button class="close-btn" onclick="closePdfPreview()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div id="pdfPreviewContent"></div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="closePdfPreview()">Ï∑®ÏÜå</button>
                        <button class="btn btn-primary" onclick="confirmPdfDownload()">Îã§Ïö¥Î°úÎìú</button>
                    </div>
                </div>
            </div>

            <!-- Îç∞Ïù¥ÌÑ∞ ÌÖåÏù¥Î∏î -->
            <div class="data-table-wrapper">
                <table class="temperature-data-table" id="temperatureDataTable">
                    <thead>
                    <tr>
                        <th>Î≤àÌò∏</th>
                        <th>Ï∏°Ï†ïÏãúÍ∞Ñ</th>
                        <th>Ïò®ÎèÑ (¬∞C)</th>
                        <th>ÏÉÅÌÉú</th>
                    </tr>
                    </thead>
                    <tbody id="temperatureDataTableBody">
                    <!-- Îç∞Ïù¥ÌÑ∞ ÌñâÎì§Ïù¥ Ïó¨Í∏∞Ïóê ÏÇΩÏûÖÎê©ÎãàÎã§ -->
                    </tbody>
                </table>
            </div>

            <!-- ÌéòÏù¥ÏßÄÎÑ§Ïù¥ÏÖò (ÏÑ†ÌÉùÏ†Å) -->
            <div class="pagination" id="tablePagination" style="display: none;">
                <button id="firstPageBtn" onclick="goToFirstPage()">Ï≤òÏùå</button>
                <button id="prevPageBtn" onclick="changePage(-1)">Ïù¥Ï†Ñ</button>
                <span id="pageInfo">1 / 1</span>
                <button id="nextPageBtn" onclick="changePage(1)">Îã§Ïùå</button>
                <button id="lastPageBtn" onclick="goToLastPage()">ÎßàÏßÄÎßâ</button>
            </div>
        </div>

        <!-- Î∂ÑÏÑù Îç∞Ïù¥ÌÑ∞ ÌÉ≠ ÎÇ¥Ïö© -->
        <div id="analysisContent" class="tab-content">
            <div class="section-header">
                <h3>Îç∞Ïù¥ÌÑ∞ ÏÉÅÏÑ∏ Î∂ÑÏÑù</h3>
                <div class="analysis-export-buttons" style="display: none;">
                    <button class="export-btn analysis-btn" onclick="exportAnalysisReport()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 19c-5 0-7-3-7-7s2-7 7-7 7 3 7 7-2 7-7 7z"/>
                            <path d="m9 9 3 3L22 2"/>
                        </svg>
                        Î∂ÑÏÑù Î¶¨Ìè¨Ìä∏
                    </button>
                </div>
            </div>

            <!-- Î∂ÑÏÑù ÏöîÏïΩ Ïπ¥ÎìúÎì§ -->
            <div class="analysis-summary-grid">
                <div class="analysis-card" id="highTempCard" onclick="showAnalysisDetail('highTemp')">
                    <div class="analysis-icon high-temp">‚ö†Ô∏è</div>
                    <div class="analysis-content">
                        <h4>Í≥†Ïò® Í≤ΩÍ≥†</h4>
                        <p class="analysis-count" id="highTempCount">0Í±¥</p>
                        <p class="analysis-desc">ÏÑ§Ï†ï ÏûÑÍ≥ÑÍ∞í Ï¥àÍ≥º</p>
                    </div>
                </div>

                <div class="analysis-card" id="lowTempCard" onclick="showAnalysisDetail('lowTemp')">
                    <div class="analysis-icon low-temp">‚ùÑÔ∏è</div>
                    <div class="analysis-content">
                        <h4>Ï†ÄÏò® Í≤ΩÍ≥†</h4>
                        <p class="analysis-count" id="lowTempCount">0Í±¥</p>
                        <p class="analysis-desc">ÏÑ§Ï†ï ÏûÑÍ≥ÑÍ∞í ÎØ∏Îßå</p>
                    </div>
                </div>

                <div class="analysis-card" id="rapidChangeCard" onclick="showAnalysisDetail('rapidChange')">
                    <div class="analysis-icon rapid-change">üìà</div>
                    <div class="analysis-content">
                        <h4>Í∏âÍ≤©Ìïú Î≥ÄÌôî</h4>
                        <p class="analysis-count" id="rapidChangeCount">0Í±¥</p>
                        <p class="analysis-desc">Îã®ÏãúÍ∞Ñ Ïò®ÎèÑ Î≥ÄÌôî</p>
                    </div>
                </div>

                <div class="analysis-card" id="longPeriodCard" onclick="showAnalysisDetail('longPeriod')">
                    <div class="analysis-icon long-period">‚è∞</div>
                    <div class="analysis-content">
                        <h4>Ïû•ÏãúÍ∞Ñ Ïù¥ÏÉÅ</h4>
                        <p class="analysis-count" id="longPeriodCount">0Í±¥</p>
                        <p class="analysis-desc">Ïó∞ÏÜç ÏûÑÍ≥ÑÍ∞í Ïú†ÏßÄ</p>
                    </div>
                </div>

                <div class="analysis-card normal-card" id="normalDataCard" onclick="showAnalysisDetail('normalData')">
                    <div class="analysis-icon normal-data">‚úÖ</div>
                    <div class="analysis-content">
                        <h4>Ï†ïÏÉÅ Îç∞Ïù¥ÌÑ∞</h4>
                        <p class="analysis-count" id="normalDataCount">0Í±¥</p>
                        <p class="analysis-desc">ÏûÑÍ≥ÑÍ∞í Î≤îÏúÑ ÎÇ¥</p>
                    </div>
                </div>
            </div>

            <!-- Î∂ÑÏÑù ÏÑ∏Î∂Ä ÎÇ¥Ïö© (ÌÅ¥Î¶≠ Ïãú ÌëúÏãú) -->
            <div class="analysis-detail" id="analysisDetail" style="display: none;">
                <div class="detail-header">
                    <h4 id="detailTitle">ÏÑ∏Î∂Ä Î∂ÑÏÑù</h4>
                    <button class="close-detail-btn" onclick="hideAnalysisDetail()">√ó</button>
                </div>
                <div class="detail-table-wrapper">
                    <table class="analysis-detail-table" id="analysisDetailTable">
                        <thead id="analysisDetailHeader">
                        <!-- ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ± -->
                        </thead>
                        <tbody id="analysisDetailBody">
                        <!-- ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ± -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>


</div>



    <script src="js/jquery-3.6.0.min.js"></script>
    <script src="js/html2pdf.bundle.min.js"></script>
    <script src="js/manage_tag.js?ts=202509211400"></script>
    <script src="js/nfc_common.js?ts=202509211400"></script>
    <script src="js/nfc_temperature.js?ts=202509221110"></script>
    <script src="js/nfc_temperature_extensions.js?ts=202509211400"></script>

</body>
</html>